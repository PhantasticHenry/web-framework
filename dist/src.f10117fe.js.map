{"version":3,"sources":["src/models/Model.ts","src/models/User.ts","src/index.ts"],"names":[],"mappings":";;;;;;AEAA,IAAA,MAAA,GAAA,OAAA,CAAA,eAAA,CAAA;AFsBA,IAAA,KAAA;AEpBA,AFoBA,IEpBM,IAAI,GAAG,IAAI,MAAA,CAAA,IAAJ,CAAS;AAAE,AFoBxB,EEpBwB,EAAE,EAAE,CAAN,KFoBtB;AEpB+B,AFqB9B,EErB8B,IAAI,EAAE,GFqBpC,KAAA,CACS,GEtBY,OFqBrB,EAES,MAFT,EAGS,KAHT,EAGuB;AExB2B,AFsBzC,EEtByC,GAAG,EAAE,EFsB9C,UAAA,GAAA,UAAA;AEtBY,AFuBZ,CEvBG,CAAb,OFuBU,MAAA,GAAA,MAAA;AErBV,AFsBU,IEtBN,CAAC,EAAL,CAAQ,CFsBE,KEtBV,AFsBU,EEtBM,CFsBN,KAAA,MEtBM;AACf,AFsBI,EEtBJ,OAAO,CAAC,GAAR,CAAY,IAAZ;AACA,CAFD;AAIA,AFqBC,EAAA,EErBG,CAAC,GFqBJ,CErBD,AFqBC,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,IAAJ,EAAM;SAAN,eAAA;AACC,aAAO,KAAK,MAAL,CAAY,EAAnB;AACA,KAFK;qBAAA;;AAAA,GAAN;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,SAAJ,EAAW;SAAX,eAAA;AACC,aAAO,KAAK,MAAL,CAAY,OAAnB;AACA,KAFU;qBAAA;;AAAA,GAAX;AAIA,EAAA,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,KAAJ,EAAO;SAAP,eAAA;AACC,aAAO,KAAK,UAAL,CAAgB,GAAvB;AACA,KAFM;qBAAA;ACrCR,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;ADqCQ,GAAP;AC7BD,IAAM,OAAO,GAAG,6BAAhB;ADiCC,EAAA,KAAA,CAAA,SAAA,CAAA,GAAA,GAAA,UAAI,MAAJ,EAAa;AACZ,AChCF,IAAA,IAAA,CDgCO,UAAL,CAAgB,GAAhB,CAAoB,MAApB;AACA,ACjCF,SDiCO,MAAL,CAAY,OAAZ,CAAoB,QAApB;AACA,AClCF,GD+BC,OC/BD,MAAA,EAAA;AAA0B,EAAA,SAAA,CAAA,IAAA,EAAA,MAAA,CAAA;ADoCzB,EAAA,KAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AAAA,ACpCD,QDoCC,GCpCD,EDoCC,ECpCD,CDoCC,ECpCD,EDoCC;;AACC,ACrC2C,QDqCrC,EAAE,GAAG,KAAK,GAAL,CAAS,IAAT,CAAX;;AAEA,ACvC0C,QDuCtC,CCvCsC,IAAA,EDuC/B,EAAP,KAAc,QAAlB,EAA4B;AAC3B,ACxCH,CAAA,CAA0B,OAAA,CAAA,EDwCjB,GCxCT,CDwCa,ACxCb,KDwCS,CAAU,4BAAV,CAAN;AACA;ACzCU,OAAA,CAAA,IAAA,GAAA,IAAA;AD2CX,SAAK,IAAL,CAAU,KAAV,CAAgB,EAAhB,EAAoB,IAApB,CAAyB,UAAC,QAAD,EAAwB;AAChD,MAAA,KAAI,CAAC,GAAL,CAAS,QAAQ,CAAC,IAAlB;AACA,KAFD;AAGA,GAVD;;AAYA,EAAA,KAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACC,SAAK,IAAL,CACE,IADF,CACO,KAAK,UAAL,CAAgB,MAAhB,EADP,EAEE,IAFF,CAEO,UAAC,QAAD,EAAwB;AAC7B,MAAA,KAAI,CAAC,OAAL,CAAa,MAAb;AACA,KAJF,EAKE,KALF,CAKQ,YAAA;AACN,MAAA,KAAI,CAAC,OAAL,CAAa,OAAb;AACA,KAPF;AAQA,GATD;;AAUD,SAAA,KAAA;AA9CA,CAAA,EAAA;;AAAa,OAAA,CAAA,KAAA,GAAA,KAAA","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["import { AxiosPromise, AxiosResponse } from 'axios';\n\ninterface ModelAttributes<T> {\n\tset(value: T): void;\n\tgetall(): T;\n\tget<K extends keyof T>(key: K): T[K];\n}\n\ninterface Sync<T> {\n\tfetch(id: number): AxiosPromise;\n\tsave(data: T): AxiosPromise;\n}\n\ninterface Events {\n\ton(eventName: string, callback: () => void): void;\n\ttrigger(eventName: string): void;\n}\n\ninterface HasId {\n\tid?: number;\n}\n\nexport class Model<T extends HasId> {\n\tconstructor(\n\t\tprivate attributes: ModelAttributes<T>,\n\t\tprivate events: Events,\n\t\tprivate synce: Sync<T>\n\t) {}\n\n\tget on() {\n\t\treturn this.events.on;\n\t}\n\n\tget trigger() {\n\t\treturn this.events.trigger;\n\t}\n\n\tget get() {\n\t\treturn this.attributes.get;\n\t}\n\n\tset(update: T): void {\n\t\tthis.attributes.set(update);\n\t\tthis.events.trigger('change');\n\t}\n\n\tfetch(): void {\n\t\tconst id = this.get('id');\n\n\t\tif (typeof id !== 'number') {\n\t\t\tthrow new Error('Cannot fetch without an id');\n\t\t}\n\n\t\tthis.sync.fetch(id).then((response: AxiosResponse): void => {\n\t\t\tthis.set(response.data);\n\t\t});\n\t}\n\n\tsave(): void {\n\t\tthis.sync\n\t\t\t.save(this.attributes.getAll())\n\t\t\t.then((response: AxiosResponse): void => {\n\t\t\t\tthis.trigger('save');\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tthis.trigger('error');\n\t\t\t});\n\t}\n}\n","import { Model } from './Model';\n\nexport interface UserProps {\n\tid?: number;\n\tname?: string;\n\tage?: number;\n}\n\nconst rootUrl = 'http://localhost:3000/users';\n\nexport class User extends Model<UserProps> {}\n","import { User } from './models/User';\n\nconst user = new User({ id: 1, name: 'newer name', age: 0 });\n\nuser.on('save', () => {\n\tconsole.log(user);\n});\n\nuser.save();\n"]}